import{u as p,a as x,r as g,j as e}from"./index-A6i-DHi-.js";import{u as h,a as f,o as j,L as m,I as c,s as l}from"./label-COEXJ-nk.js";import{B as y}from"./index-BAaPsPyw.js";import{C as w,a as S,b,c as v,d as N}from"./card-DZRAyplg.js";import{u as L,a as C}from"./axiosClient-oslsaWBi.js";import"./utils-B5n6x0oC.js";const P=(a,t)=>C({url:"/api/auth/login",method:"POST",headers:{"Content-Type":"application/json"},data:a,signal:t}),E=a=>{const t=["login"],{mutation:r}={mutation:{mutationKey:t}};return{mutationFn:o=>{const{data:s}=o??{};return P(s)},...r}},F=a=>{const t=E();return L(t)},I=j({email:l().email("Invalid email address"),password:l().min(6,"Password must be at least 6 characters")});function O(){const a=p(),{redirect:t}=x({from:"/login"}),r=F(),[i,o]=g.useState(null),s=h({resolver:f(I),defaultValues:{email:"admin@example.com",password:"admin123"}}),d=async u=>{try{o(null);const n=await r.mutateAsync({data:u});localStorage.setItem("token",n.token||""),localStorage.setItem("user",JSON.stringify(n.user)),a(t?{to:t}:{to:"/dashboard"})}catch(n){o(n.response?.data?.message||"Login failed")}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs(w,{className:"w-full max-w-md",children:[e.jsxs(S,{children:[e.jsx(b,{children:"Login"}),e.jsx(v,{children:"Enter your credentials to access the system"})]}),e.jsx(N,{children:e.jsxs("form",{onSubmit:s.handleSubmit(d),className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"email",children:"Email"}),e.jsx(c,{id:"email",type:"email",placeholder:"admin@example.com",...s.register("email")}),s.formState.errors.email&&e.jsx("p",{className:"text-sm text-destructive",children:s.formState.errors.email.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{htmlFor:"password",children:"Password"}),e.jsx(c,{id:"password",type:"password",placeholder:"••••••••",...s.register("password")}),s.formState.errors.password&&e.jsx("p",{className:"text-sm text-destructive",children:s.formState.errors.password.message})]}),i&&e.jsx("div",{className:"p-3 text-sm text-destructive bg-destructive/10 rounded-md",children:i}),e.jsx(y,{type:"submit",className:"w-full",disabled:r.isPending,children:r.isPending?"Logging in...":"Login"}),e.jsx("div",{className:"text-sm text-muted-foreground text-center",children:"Default admin: admin@example.com / admin123"})]})})]})})}function A(){return e.jsx(O,{})}export{A as component};
